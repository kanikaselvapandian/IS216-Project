<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <title>Profile | calendaREADY</title>
    <link rel="icon" href="img/logo/logo-greenbg.png">
    <link rel="stylesheet" href="css/profile.css">
    <!--navbar css-->
    <link rel="stylesheet" href="css/navbar.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://unpkg.com/vue@3.2.23/dist/vue.global.js"></script>

    <script type="module" src="js/profile.js"></script>
    <script type="module" src="js/profile_piechart.js"></script>

</head>
<body>

    <!-- NAVIGATION BAR (consistent across all pages)  -->
    <nav class="navbar navbar-expand-md navbar-dark" style="background-color: #104547">
        <div class="container">
            <img src="img/logo/logo-white.png" style="width:64px; height:64px">

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#myMenu" aria-controls="myMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="myMenu">
                <div class="navbar-nav ms-auto">
                    <a class="nav-item nav-link text-white" href="home.html">Home</a>
                    <a class="nav-item nav-link text-white" href="explore.html">Events</a>
                    <a class="nav-item nav-link text-white" href="calendar.html">Calendar</a>
                    <a class="nav-item nav-link text-white active" aria-current="page" href="profile.html">Profile</a>
                    <a class="nav-item nav-link text-white" href="login.html" onclick="logoutFunction()">Logout</a>
                </div>
            </div>
        
        </div>
    </nav>

    <div class="container" id="tabs">

        <!-- TABS -->
        <ul class="nav nav-tabs pt-5 nav-fill" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button style="color: white; background-color: #104547" class="nav-link my-nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-tab-pane" type="button" role="tab" aria-controls="info-tab-pane" aria-selected="true"> Personal Information </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link my-nav-link" id="preference-tab" data-bs-toggle="tab" data-bs-target="#preference-tab-pane" type="button" role="tab" aria-controls="preference-tab-pane" aria-selected="true"> Preference </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link my-nav-link" id="events-tab" data-bs-toggle="tab" data-bs-target="#events-tab-pane" type="button" role="tab" aria-controls="events-tab-pane" aria-selected="false" > Events </button>
            </li>
        </ul>


        <!-- START OF CONTENT -->
        <div class="tab-content" id="myTabContent">

            <!-- INFO TAB -->
            <div class="tab-pane fade show active" id="info-tab-pane" role="tabpanel" aria-labelledby="info-tab" tabindex="0"> 
                <!-- INFO DIV -->
                <div class="row" id="info">

                    <h2>Personal Information</h2>
        
                    <!-- IMAGE -->
                    <div class="col-lg-3 col-md-4 col-12">
                        <div class="avatar-upload">
                            <!-- EDIT BUTTON -->
                            <div class="avatar-edit"> 
                                <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" />
                                <label for="imageUpload"></label>
                            </div>
                            <!-- PICTURE -->
                            <div class="avatar-preview">
                                <div id="imagePreview" style="background-image: url('');">
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <!-- TABLE OF INFO -->
                    <div id="info" class="col-md-7 col-12 col-lg-8">
                        <form class="is-readonly">
                            <table class="table">
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="name">Name</label></td>
                                    <td class="detail_value"><input type="text" class="form-control is-disabled" id="name" placeholder="" value="" disabled></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="username">Username</label></td>
                                    <td class="detail_value"><input type="text" class="form-control is-disabled" id="username" placeholder="" value="" disabled></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="gender">Gender</label></td>
                                    <td class="detail_value"><select class="form-control is-disabled" id="gender" disabled></select></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="birthday">Birthday</label></td>
                                    <td class="detail_value"><input type="date" class="form-control is-disabled" id="birthday" placeholder="" value="" disabled></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="school">School</label></td>
                                    <td class="detail_value"><select class="form-control is-disabled" id="school" disabled></select></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="email">Email</label></td>
                                    <td class="detail_value"><input type="text" class="form-control is-disabled" id="email" placeholder="" value="" disabled></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="matric_no">Matric No.</label></td>
                                    <td class="detail_value"><input type="number" class="form-control is-disabled" id="matric_no" placeholder="" value="" disabled></td>
                                    </div>
                                </tr>
                                <tr>
                                    <div class="form-group">
                                    <td class="detail_name"><label for="phone_no">Phone No.</label></td>
                                    <td class="detail_value"><input type="number" class="form-control is-disabled" id="phone_no" placeholder="" value="" disabled></td>
                                    </div>
                                </tr>
        
        
                            </table>
                            
                            <button type="button" class="btn btn-default btn-edit js-edit">Edit</button>
                            <button type="button" class="btn btn-default btn-save js-save" id="save" >Save</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- PREFERENCE TAB -->
            <div class="tab-pane fade" id="preference-tab-pane" role="tabpanel" aria-labelledby="preference-tab" tabindex="0">
                <!-- PREFERENCE -->
                <div id="user_preference">
                    <h2>Preferences</h2>
        
                    <div class="row justify-content-center" id="preference">
                        
                        <!-- populated by firebase -->
        
                    </div>
        
                </div>
            </div>

            <!-- EVENTS TAB -->
            <div class="tab-pane fade" id="events-tab-pane" role="tabpanel" aria-labelledby="events-tab" tabindex="0">

                <!-- ALL EVENTS -->
                

                <!-- PAST EVENTS -->
                <div class="container">
                    
                    <h2 id="events_h2">Statistics</h2>
<!-- pie chart start -->

                    <div id="app">
                        {{get_yummy_pie}}

                            <pie-chart
                                    :numbers="numbers"
                                    :colors="colors"
                                    :event_legend="event_legend"
                            >
                            </pie-chart>
                    </div>
                        
                    <script type="text/x-template" id="pie-chart">

                        <div class="card" id="total_n_pie_card">

                            <div class="total">
                                <span>Total events:</span>
                                {{ total }}
                            </div>

                            <div class="pie-chart">
                                <svg xmlns="http://www.w3.org/2000/svg" :viewBox="`0 0 ${center * 2} ${center * 2}`" :style="{ height: `${center * 2}px`, width: `${center * 2}px` }">
                                <circle
                                        v-show="!total"
                                        fill="none"
                                        :cx="center"
                                        :cy="center"
                                        :r="radius"
                                        stroke="#e5e9f2"
                                        :stroke-width="strokeWidth"
                                        />
                                <circle
                                        v-for="(p, index) in percentage"
                                        :ref="`circle${index}`"
                                        :key="index"
                                        fill="none"
                                        :cx="center"
                                        :cy="center"
                                        :r="radius"
                                        :stroke="colors[index]"
                                        :stroke-width="strokeWidth"
                                        :stroke-dasharray="`${p * circumference}px ${circumference}px`"
                                        :stroke-dashoffset="`${-(percentage.slice(0, index).reduce((prev, cur) => prev + cur, 0)) * circumference}px`"
                                        @mouseenter="handleMouseenter(index)"
                                        @mouseleave="handleMouseleave(index)"
                                        />
                                </svg>
                            
                                <div class="temp-item" :class="{ 'has-value': !!temp }">
                                {{ temp }}
                                </div>

                            </div>
                        </div>


                        <div class="container">
                            <div class="items-container">
                                <div v-for="(n, index) in event_legend" :key="index" class="items-wrap">
                                    <div class="items" :style="{ backgroundColor: colors[index] }"></div>
                                    <span class="event_type">{{ n }}</span>
                                    <br>
                                </div>
                            </div>
                        </div>
                    </script>


<!-- pie chart end -->

                    <h2 id="events_h2">Past Events</h2>

                    <div class="cards_landscape_wrap-2" id="past_events">
                    </div>
                </div>

            </div>

        </div>

    </div>


    <!-- MODAL (SUCCESS)-->
    <div>
        <div class="modal fade" id="successModal" tabindex="-1" >
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Success!</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <p>Your changes has been saved.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
        </div>
        </div>
        </div>
    </div>

    <!-- MODAL (ERROR)-->
    <div>
        <div class="modal fade" id="errorModal" tabindex="-1" >
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Error!</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="error_msg">
            <p></p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
        </div>
        </div>
        </div>
    </div>
    
    <!-- <script type="module" src="js/profile.js"></script> -->
    <script type="module" src="js/login-common.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
</body>
</html>