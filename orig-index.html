<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="author" content="2022 Term 1: IS216 G7 - Team 7" />
        <meta http-equiv="refresh" content="60; url=index.html">
        <!-- If Firebase does not respond for some reason, this page will refresh itself. -->
        <title>Login | calendaREADY</title>
        <link rel="icon" href="img/logo/logo-greenbg.png">

        <!-- Bootstrap CSS -->
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
        crossorigin="anonymous"
        />
        <!-- External CSS -->
        <link href="css/login.css" rel="stylesheet" />
    </head>
    <body class="text-center">

        <!-- Login Box -->
        <main class="form-login w-100 m-auto" style="max-width:fit-content;">

            <h3 class="mb-3">Redirecting...</h3>

            <div class="spinner-border text-secondary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>

        </main>

        <!-- Bootstrap JS -->
        <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"
        ></script>

        <!-- External JS Soon? -->
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-analytics.js";
            import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyC_sRHAqy76KR30qWRWTT1HjahFEN0IN4Q",
                authDomain: "calendaready-g7t7.firebaseapp.com",
                databaseURL: "https://calendaready-g7t7-default-rtdb.asia-southeast1.firebasedatabase.app",
                projectId: "calendaready-g7t7",
                storageBucket: "calendaready-g7t7.appspot.com",
                messagingSenderId: "544037155570",
                appId: "1:544037155570:web:c7e3ca7a1c55beaea8966b",
                measurementId: "G-03K9PHBX7D"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const auth = getAuth(app);

            onAuthStateChanged(auth, (user) => {
                if (user) {
                // User is signed in, see docs for a list of available properties
                // https://firebase.google.com/docs/reference/js/firebase.User
                window.location.href = "home.html"
                } else {
                // User is signed out
                // ...
                window.location.href = "login.html"
                }
            });
        </script>
    </body>
</html>